<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Google Calendar Events as Cards</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f9fafb;
      margin: 0;
      padding: 20px;
      color: #1f2937;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }
    #events-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .event-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .event-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
    }
    .event-header {
      background: #3b82f6; /* Change to match your calendar color */
      color: white;
      padding: 1rem;
      font-weight: bold;
      font-size: 1.1rem;
    }
    .event-body {
      padding: 1rem;
    }
    .event-time {
      font-size: 0.95rem;
      color: #4b5563;
      margin-bottom: 0.5rem;
    }
    .event-desc {
      margin-top: 0.75rem;
      line-height: 1.5;
    }
    .event-location {
      margin-top: 0.5rem;
      font-style: italic;
      color: #6b7280;
    }
    #loading, #error {
      text-align: center;
      padding: 2rem;
      font-size: 1.1rem;
    }
    @media (max-width: 600px) {
      #events-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <h1>Upcoming Events</h1>
  <div id="loading">Loading events...</div>
  <div id="error" style="display:none; color:red;"></div>
  <div id="events-container"></div>

  <script>
    // === CONFIG ===
    const API_KEY = 'AIzaSyClgiyfj5YcGAzlrYjDRBuZ2ltnXGO29_Q';               // ‚Üê Replace
    const CALENDAR_ID = '8403170c3a44dbb1d9a8114efaf1154d2114e6dada0941bc9b637288dea3a631@group.calendar.google.com';       // ‚Üê Replace (URL-encode if it has @ or .)
    const MAX_EVENTS = 20;                             // How many to show
    // ==============

    const container = document.getElementById('events-container');
    const loading = document.getElementById('loading');
    const errorDiv = document.getElementById('error');

    async function fetchEvents() {
      try {
        // Format dates for query (next year from now, adjust as needed)
        const timeMin = new Date().toISOString();
        const timeMax = new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString();

        const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(CALENDAR_ID)}/events?` +
                    `key=${API_KEY}&` +
                    `timeMin=${timeMin}&` +
                    `timeMax=${timeMax}&` +
                    `maxResults=${MAX_EVENTS}&` +
                    `singleEvents=true&` +          // Expand recurring events
                    `orderBy=startTime`;

        const response = await fetch(url);
        if (!response.ok) throw new Error(`API error: ${response.status}`);

        const data = await response.json();
        loading.style.display = 'none';

        if (!data.items || data.items.length === 0) {
          container.innerHTML = '<p>No upcoming events found.</p>';
          return;
        }

        data.items.forEach(event => {
          const card = document.createElement('div');
          card.className = 'event-card';

          // Title
          const header = document.createElement('div');
          header.className = 'event-header';
          header.textContent = event.summary || '(No title)';
          card.appendChild(header);

          const body = document.createElement('div');
          body.className = 'event-body';

          // Time
          let timeStr = '';
          if (event.start.dateTime) {
            const start = new Date(event.start.dateTime);
            const end = event.end.dateTime ? new Date(event.end.dateTime) : null;
            timeStr = start.toLocaleString([], { weekday: 'short', month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' });
            if (end) timeStr += ` ‚Äì ${end.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' })}`;
          } else if (event.start.date) {
            timeStr = new Date(event.start.date).toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' }) + ' (All day)';
          }
          const timeEl = document.createElement('div');
          timeEl.className = 'event-time';
          timeEl.textContent = timeStr;
          body.appendChild(timeEl);

          // Description
          if (event.description) {
            const desc = document.createElement('div');
            desc.className = 'event-desc';
            desc.innerHTML = event.description.replace(/\n/g, '<br>'); // Basic formatting
            body.appendChild(desc);
          }

          // Location
          if (event.location) {
            const loc = document.createElement('div');
            loc.className = 'event-location';
            loc.textContent = `üìç ${event.location}`;
            body.appendChild(loc);
          }

          card.appendChild(body);
          container.appendChild(card);
        });
      } catch (err) {
        loading.style.display = 'none';
        errorDiv.style.display = 'block';
        errorDiv.textContent = `Failed to load events: ${err.message}. Check API key, calendar ID, and that the calendar is public.`;
        console.error(err);
      }
    }

    // Run on page load
    fetchEvents();
  </script>
</body>
</html>
